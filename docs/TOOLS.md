# Tools

## Table of contents

1.  [Deployment](#deployment)
2.  [Generating assets](#generating-assets)
3.  [Database backups](#database-backups)

## Development

```shell
yarn run ios-dev
```

or

```shell
yarn run android-dev
```

## Deployment

To deploy to the stores, use:

```shell
yarn run beta
```

## Generating assets

1.  Save source icon to `./design/icon.png`. It should be > 1024 x 1024 px.
2.  Save source splash image to `./design/splash.png`. It should be > 2208 x 2208 px with a 30% margin.

```shell
npm install -g generator-rn-toolbox
brew install imagemagick
yo rn-toolbox:assets --icon ./design/icon.png --splash ./design/splash.png --store
yo rn-toolbox:assets --android-notification-icon ./design/icon.png
```

The store assets above will be saved to the root folder.

3.  Add this to your `.gitignore`:

```
# assets generated by rn-generator-toolbox
itunes-icon.png
play-store-icon.png
play-store-image.png
```

Done!

## Database backups

We use [firestore-backup-restore]() to backup and restore the database from backups. It's super simple to use:

### Setup

#### Install globally:

`Once-off`.

```
yarn global add firestore-backup-restore
```

#### Copy firebase project credentials to root config folder:

1. Visit the Firebase Console
2. Select your project
3. Navigate to Project Settings
4. Navigate to Service Accounts
5. Click Generate New Private Key
6. Move (and rename) that key to: `./config/firebase/ENVIRONMENT/credentials.json`

### Commands

Switch out `development` for `production` as needed.

#### Backup

```
firestore-backup-restore --restoreAccountCredentials ./config/firebase/development/credentials.json --backupPath ./backups/development
```

#### Restore

```
firestore-backup-restore --accountCredentials ./config/firebase/development/credentials.json --backupPath ./backups/development --prettyPrint
```
